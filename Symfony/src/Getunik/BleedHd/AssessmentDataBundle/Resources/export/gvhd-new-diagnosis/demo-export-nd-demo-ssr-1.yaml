
name: GVHD New Diagnosis Demo
type: gvhd-new-diagnosis
columns:
    -
        __directive:
            op: insert
            source: ../patient-default.yaml
    -
        __directive:
            op: insert
            source: ../assessment-default.yaml
    -
        label: Score
        extractor: Score
        reference: total
    -
        label: aGVHD
        extractor: Score
        reference: acute
        transform:
            type: Mapping
            map:
              -
                source: 0
                value: 'No aGVHD'
              -
                source: 1
                value: 'Grade I'
              -
                source: 2
                value: 'Grade II'
              -
                source: 3
                value: 'Grade III'
              -
                source: 4
                value: 'Grade IV'
              -
                default: 42
    -
        label: Delay
        extractor: Score
        reference: acuteDelay
    -
        label: cGVHD
        extractor: Score
        reference: chronic
    # screen 1
    -
        label: Demo Label
        extractor: Response
        reference: gvhd-new-diagnosis.acute.clinical-staging.skin
        transform:
            type: Mapping
            map:
              -
                source: 0
                value: 'No rash'
              -
                source: 1
                value: 'Rash < 25% body surface'
              -
                source: 2
                value: 'Rash 25% - 50% body surface'
              -
                source: 3
                value: 'Generalized erythroderma'
              -
                source: 4
                value: 'Generalized erythroderma with bullae'

              -
                default: 42
    -
        extractor: Response
        reference: gvhd-new-diagnosis.acute.clinical-staging.liver
    -
        extractor: Response
        reference: gvhd-new-diagnosis.acute.clinical-staging.gut
    -
        extractor: Response
        reference: gvhd-new-diagnosis.acute.clinical-staging.performance
    # screen 2
    -
        extractor: Response
        reference: gvhd-new-diagnosis.acute.timing.delay
    # screen 3
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.skin.diagnostic
        transform:
            type: Mapping
            map:
              -
                source: 'poikiloderma'
                value: 1
              -
                source: 'lichen-planus-like-features'
                value: 2
              -
                source: 'sclerotic-features'
                value: 3
              -
                source: 'morphea-like-features'
                value: 4
              -
                source: 'lichen-sclerosus-like-features'
                value: 5
              -
                default: 42
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.skin.distinctive
        transform:
            inlineMeta: true
            type: InlineSupplement
            valueSeparator: '+'
            listItemSeparator: ';'
            listEmptyValue: 'Empty List'
            supplements:
                -
                    slug: confirmation
                    map:
                      -
                        source: pending
                        value: 77
                      -
                        source: positive
                        value: 50
                      -
                        source: negative
                        value: 80
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.skin.other
        transform:
            type: BitVector
            trueValue: 'true'
            falseValue: 'false'
            listItemSeparator: ';'
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.skin.common
    # screen 4
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.nails.distinctive
        transform:
            type: InlineSupplement
            supplements:
                -
                    slug: confirmation
    # screen 5
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.hair.distinctive
        transform:
            inlineMeta: true
            type: InlineSupplement
            listEmptyValue: 'Empty List'
            supplements:
                -
                    slug: confirmation
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.hair.other
        transform:
            type: BitVector
    # screen 6
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.mouth.diagnostic
        transform:
            inlineMeta:
                map:
                  -
                    source: 'nass'
                    value: 'Not assessed'
                  -
                    source: 'nya'
                    value: 'Not yet answered'
                  -
                    default: 'invalid'
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.mouth.distinctive
    -
        extractor: Supplement
        reference: gvhd-new-diagnosis.chronic.mouth.distinctive.confirmation
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.mouth.common
    -
        label: gvhd-new-diagnosis.chronic.mouth.common.meta
        extractor: MetaResponse
        reference: gvhd-new-diagnosis.chronic.mouth.common
        transform:
            type: Mapping
            map:
              -
                source: 'nass'
                value: 'Not assessed'
              -
                source: 'nya'
                value: 'Not yet answered'
              -
                default: 'invalid'
    # screen 7
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.eyes.distinctive
        transform:
            type: InlineSupplement
            supplements:
                -
                    slug: confirmation
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.eyes.other
    # screen 8
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.genital-tract.diagnostic
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.genital-tract.distinctive
        transform:
            type: InlineSupplement
            supplements:
                -
                    slug: confirmation
    # screen 9
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.gi-tract.diagnostic
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.gi-tract.other
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.gi-tract.common
    # screen 10
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.liver.common
    # screen 11
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.lungs.diagnostic-biopsy
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.lungs.distinctive-dependent
        transform:
            type: InlineSupplement
            supplements:
                -
                    slug: confirmation
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.lungs.air-trapping
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.lungs.other
    # screen 12
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.muscles-fascia-joints.diagnostic
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.muscles-fascia-joints.distinctive
        transform:
            type: InlineSupplement
            supplements:
                -
                    slug: confirmation
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.muscles-fascia-joints.other
    # screen 13
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.immune.other
    # screen 14
    -
        extractor: Response
        reference: gvhd-new-diagnosis.chronic.other.other
